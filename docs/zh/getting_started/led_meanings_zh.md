# LED 指示灯含义（Pixhawk 系列）

[Pixhawk 系列飞行控制器](../flight_controller/pixhawk_series.md)使用 LED 指示灯来显示飞行器的当前状态。
- [UI LED](#ui_led) 提供面向用户的状态信息，与*飞行就绪状态*相关。
- [状态 LED](#status_led) 提供 PX4IO 和 FMU SoC 的状态。
  它们指示电源、引导加载程序模式和活动状态，以及错误。

<a id="ui_led"></a>

## UI LED

RGB *UI LED* 指示飞行器当前的*飞行就绪*状态。
这通常是一个超亮的 I2C 外设，可能装在飞行控制器板上，也可能不装（即 FMUv4 没有板载，通常使用装在 GPS 上的 LED）。

下图显示了 LED 与飞行器状态之间的关系。

:::warning
可能出现有 GPS 锁定（绿色 LED）但仍无法解锁飞行器的情况，因为 PX4 尚未[通过飞行前检查](../flying/pre_flight_checks.md)。**需要有效的全球位置估计才能起飞！**
:::

:::tip
如果出现错误（闪烁红色），或者飞行器无法获得 GPS 锁定（从蓝色变为绿色），请在 *QGroundControl* 中检查更详细的状态信息，包括校准状态和[飞行前检查（内部）](../flying/pre_flight_checks.md)报告的错误消息。
还要检查 GPS 模块是否正确连接，Pixhawk 是否正确读取您的 GPS，以及 GPS 是否发送正确的 GPS 位置。
:::

![LED 含义](../../assets/flight_controller/pixhawk_led_meanings.gif)


* **[稳定蓝色] 已解锁，无 GPS 锁定：** 表示飞行器已解锁但没有来自 GPS 单元的位置锁定。
当飞行器解锁时，PX4 将解锁电机控制，允许您驾驶无人机。
解锁时请始终谨慎，因为大型螺旋桨在高转速下可能很危险。
飞行器在此模式下无法执行引导任务。

* **[脉冲蓝色] 已锁定，无 GPS 锁定：** 与上述类似，但您的飞行器已锁定。
这意味着您将无法控制电机，但所有其他子系统都在工作。

* **[稳定绿色] 已解锁，GPS 锁定：** 表示飞行器已解锁并且从 GPS 单元获得了有效的位置锁定。
当飞行器解锁时，PX4 将解锁电机控制，允许您驾驶无人机。
解锁时请始终谨慎，因为大型螺旋桨在高转速下可能很危险。
在此模式下，飞行器可以执行引导任务。

* **[脉冲绿色] 已锁定，GPS 锁定：** 与上述类似，但您的飞行器已锁定。
  这意味着您将无法控制电机，但包括 GPS 位置锁定在内的所有其他子系统都在工作。

* **[稳定紫色] 故障安全模式：** 当飞行器在飞行期间遇到问题时，此模式将被激活，
例如失去手动控制、电池电量严重不足或内部错误。
在故障安全模式期间，飞行器将尝试返回其起飞位置，或者可能直接在当前位置降落。

* **[稳定琥珀色] 低电量警告：** 表示您飞行器的电池电量正在危险地降低。
在某个点之后，飞行器将进入故障安全模式。但是，此模式应该发出警告信号，表明是时候结束这次飞行了。

* **[闪烁红色] 错误/需要设置：** 表示您的自动驾驶仪需要在飞行前进行配置或校准。
将您的自动驾驶仪连接到地面控制站以验证问题所在。
如果您已完成设置过程但自动驾驶仪仍显示为红色并闪烁，可能存在其他错误。


<a id="status_led"></a>

## 状态 LED

三个*状态 LED* 为 FMU SoC 提供状态，另外三个为 PX4IO（如果存在）提供状态。
它们指示电源、引导加载程序模式和活动状态，以及错误。

![Pixhawk 4](../../assets/flight_controller/pixhawk4/pixhawk4_status_leds.jpg)

从上电开始，FMU 和 PX4IO CPU 首先运行引导加载程序（BL），然后运行应用程序（APP）。
下表显示了引导加载程序和 APP 如何使用 LED 来指示状态。

颜色 | 标签 | 引导加载程序用法 | APP 用法
--- | --- | --- | ---
蓝色 | ACT（活动） | 引导加载程序接收数据时闪烁 | ARM 状态指示
红色/琥珀色 | B/E（在引导加载程序中/错误） | 在引导加载程序中时闪烁 | 错误指示
绿色 |PWR（电源） | 引导加载程序不使用 | ARM 状态指示

::: info
上面显示的 LED 标签是常用的，但在某些板上可能有所不同。
:::

下面提供了如何解释 LED 的更详细信息（其中"x"表示"任何状态"）

红色/琥珀色 | 蓝色 |  绿色 | 含义
--- | --- | --- | ---
10Hz | x | x | 过载 CPU 负载 > 80%，或 RAM 使用率 > 98%
关闭 | x | x | 过载 CPU 负载 <= 80%，或 RAM 使用率 <= 98%
NA | 关闭 | 4 Hz| actuator_armed->armed && failsafe
NA | 开启 | 4 Hz | actuator_armed->armed && !failsafe
NA | 关闭 |1 Hz | !actuator_armed-> armed && actuator_armed->ready_to_arm
NA | 关闭 |10 Hz | !actuator_armed->armed  && !actuator_armed->ready_to_arm
