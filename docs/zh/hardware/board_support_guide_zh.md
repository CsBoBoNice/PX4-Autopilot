# 制造商 PX4 板载支持指南

PX4 开发和测试团队完全支持并维护符合 [Pixhawk 标准](https://pixhawk.org/standards/) 的开发板。
希望偏离标准或创建全新开发板的制造商可以这样做，但需要支持由此产生的兼容性差异。

本指南概述了板载支持的[通用要求](#general_requirements)，以及不同[板载支持类别](#board-support-categories)的附加要求。

::: info
不符合要求的开发板是[不受支持的](#unsupported)；它们不会被列在 PX4 网站硬件列表中，并将从代码库中删除。
:::

<a id="general_requirements"></a>

## 通用要求

所有受支持开发板的通用要求是：

1. 硬件必须在市场上可以买到。
1. 开发板不得有阻塞性硬件缺陷或不可接受的质量问题，这些问题会使在无人机上使用 PX4 变得不可能或危险。
   开发板需要通过验收标准以确保零件和组装的质量。
1. 为客户提供清晰且简单的客户支持联系方式。
   接受以下一种或多种方式：
   - PX4 Discord 服务器存在
   - 支持邮箱
   - 电话号码

1. PX4 维护者的联系点（PoC）（直接邮箱或在 Slack/论坛/Github 上可联系）
1. 开发板需要使用 [PX4 引导加载程序协议](https://github.com/PX4/PX4-Autopilot/tree/main/platforms/nuttx/src/bootloader)。
   有关引导加载程序的更多信息，请参见：[PX4 Nuttx 移植指南 > 引导加载程序](../hardware/porting_guide_nuttx.md#bootloader)。
1. 充分的文档，包括但不限于：
   - 公开提供的完整引脚图，将 PX4 引脚定义映射到：
     1. 微控制器引脚
     2. 物理外部连接器
   - 主要组件（传感器、电源等）的框图或完整原理图，允许推断软件要求和启动顺序
   - 详述其使用的成品手册

1. 必须有一个专门的网页用于 PX4 开发板，列出与 PX4 一起使用的功能和限制，并包含或链接到上述文档。

## 板载支持类别

板载支持类别如下所列。每个类别中的自动驾驶仪开发板列在：[https://px4.io/autopilots/](https://px4.io/autopilots/)

::: info
制造商支持的开发板可能与 Pixhawk 开发板一样好或更好（例如通过规模经济）。
:::

## Pixhawk 标准

Pixhawk 开发板是符合 Pixhawk 标准的开发板。这些标准在 [pixhawk.org](https://pixhawk.org/) 上有详细说明，但在高层面上要求开发板通过标准规定的电气测试，并且制造商已签署 Pixhawk 采纳者和商标协议。

PX4 通常只支持商业上可获得的开发板，这通常意味着支持在过去五年内发布的开发板标准。

### VER 和 REV ID（硬件修订和版本感应）{#ver_rev_id}

FMUv5 及以后版本具有电气感应机制。
这种感应与可选配置数据相结合，将用于定义硬件相对于强制设备和电源配置的配置。制造商必须通过向 [DS-018 Pixhawk 标准](https://github.com/pixhawk/Pixhawk-Standards) 提交 PR 来从 PX4 开发板维护者那里获得 VER 和 REV ID，以修订开发板版本和修订。

因为这些开发板 100% 符合 Pixhawk 标准，为 VER 和 REV ID 分配的值是该 FMU 版本的默认值。

## 制造商支持

这些开发板由制造商支持。
要符合此类别，开发板必须在最新稳定 PX4 发布的 4 个月内与该发布版本一起工作。

- 制造商拥有支持权
- 制造商必须向核心开发团队提供至少 2 块开发板（用于测试架和测试团队使用）

:::tip
虽然 PX4 维护者和飞行测试团队没有承诺支持和测试此类别的开发板，但我们强烈建议 PX4 和制造商团队建立密切的工作关系。
这将为所有方面带来更好的结果。
:::

::: info
这些开发板将根据兼容性分配 [VER 和 REV ID](#ver_rev_id)。
如果开发板是 FMU 规范的变体并且能够运行相同的二进制文件，PX4 将进行特殊分配，制造商支持的小差异。
联系 PX4 维护者 [boards@px4.io](mailto:boards@px4.io) 请求更多信息。
:::

## 实验性

这些开发板是所有不属于上述类别的开发板，或者不再属于这些类别。
适用以下要求：

- 开发板必须与至少一个 PX4 发布版本一起工作用于定义的车辆类型，但不一定是最新版本。

::: info
以前是 Pixhawk 或制造商支持的实验性开发板将保留其原始 ID。
新的实验性开发板根据兼容性分配 [VER 和 REV ID](#ver_rev_id)，与制造商支持的开发板相同。
:::

## 不受支持

此类别包括所有不受 PX4 项目或制造商支持的开发板，以及超出"实验性"支持范围的开发板。

- 开发板在纸面上与我们已经支持的某些东西有一定兼容性，提升到"实验性"只需要很少的努力，但开发团队或制造商目前都没有追求这个
- 硬件的制造商/所有者违反了我们的[行为准则](https://discuss.px4.io/t/code-of-conduct/13655)
- 闭源，其中任何添加对开发板支持所需的工具/库/驱动程序等由于许可限制被认为不兼容
- 开发板不满足通用要求中概述的最低要求

::: info
不受支持的开发板将不会分配 [VER 和 REV ID](#ver_rev_id)（并且无法运行 PX4 FMUvX 固件）。
:::

## 发布流程

假设当制造商声明开发板属于某个类别时，该开发板符合该类别的要求和通用要求。

当将新开发板推向市场并属于制造商支持或实验类别时，制造商负责更新 PX4 文档并在 PX4 中执行开发板发布流程。我们建议以下步骤：

联系 PX4 开发板维护者 [boards@px4.io](mailto:boards@px4.io) 并请求以下内容：

1. 为 QGC 中的引导加载程序和固件选择分配开发板 ID。
2. REV 和 VER ID 电阻值的分配。
3. 如果开发板支持 USB：要求分配 USB VID 和 PID 或提供 USB VID 和 PID。

根据[移植指南](../hardware/porting_guide.md)中描述的开发板移植发布流程集成开发板

:::warning
开发板支持流程可能会随着时间的推移而改变和改进。
鼓励硬件制造商通过定期硬件电话会议、讨论论坛或 Discord 为此流程做出贡献。
:::

## 支持

如果开发板支持指南/流程的某些部分不清楚：

- 在 `Hardware` 类别下的 Discord 频道或讨论论坛上向社区寻求帮助
- 参加定期硬件电话会议
- 咨询选项列在这里：[https://px4.io/community/consultants/](https://px4.io/community/consultants/)
